<!DOCTYPE html>
<html>
	<head>
		<title>Device Orientation</title>
	</head>
	<script type="text/javascript">
		window.onload = function() {
			if (window.DeviceOrientationEvent) {
				document.getElementById("doEvent").innerHTML = "DeviceOrientation";
				// Listen for the deviceorientation event and handle the raw data
				window.addEventListener('deviceorientation', function(eventData) {
					// gamma is the left-to-right tilt in degrees, where right is positive
					var tiltLR = eventData.gamma;

					// beta is the front-to-back tilt in degrees, where front is positive
					var tiltFB = eventData.beta;

					// alpha is the compass direction the device is facing in degrees
					var dir = eventData.alpha

					// call our orientation event handler
					deviceOrientationHandler(tiltLR, tiltFB, dir);
				}, false);
			} else {
				alert('b');
				document.getElementById("doEvent").innerHTML = "Not supported."
			}
		}

		function deviceOrientationHandler(tiltLR, tiltFB, dir){
			document.getElementById("doTiltLR").innerHTML = Math.round(tiltLR);
			document.getElementById("doTiltFB").innerHTML = Math.round(tiltFB);
			document.getElementById("doDirection").innerHTML = Math.round(dir);

			// Apply the transform to the image
			var logo = document.getElementById("imgLogo");
			logo.style.webkitTransform =
			  "rotate("+ dir +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";
			logo.style.MozTransform = "rotate("+ dir +"deg)";
			logo.style.transform =
			  "rotate("+ dir +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";
		}

	</script>
	<body>
		<div class="main">
			<h2>Device Orientation</h2>
			<table>
				<tr>
					<td>Event Supported</td>
					<td id="doEvent"></td>
				</tr>
				<tr>
					<td>Tilt Left/Right [gamma]</td>
					<td id="doTiltLR"></td>
				</tr>
				<tr>
					<td>Tilt Front/Back [beta]</td>
					<td id="doTiltFB"></td>
				</tr>
				<tr>
					<td>Direction [alpha]</td>
					<td id="doDirection"></td>
				</tr>
			</table>
		</div>
		<div class="container" style="perspective: 300;">
			<img src="logo.png" id="imgLogo" class="logo">
		</div>
	</body>
</html>